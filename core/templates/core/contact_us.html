{% extends 'core/base.html' %}

{% load static %}
{% load humanize %}

{% block content %}

<main>

    <div class="hero medium-height jarallax" data-jarallax data-speed="0.2">
        <img class="jarallax-img" src="{% static 'img/contactp.png' %}" alt="">
        <div class="wrapper opacity-mask d-flex align-items-center justify-content-center text-center animate_hero" data-opacity-mask="rgba(0, 0, 0, 0.5)">
            <div class="container">
                <small class="slide-animated one">Belleza Beach Resort</small>
                <h1 class="slide-animated two">Contact Us</h1>
            </div>
        </div>
    </div>
    <!-- /Background Img Parallax -->

    <div class="container margin_120_95">
        <div class="row justify-content-between">
            <div class="col-xl-4 col-lg-5 order-lg-2">
                <div class="contact_info">
                    <ul class="clearfix">
                        <li>
                            <!-- <i class="bi bi-geo-alt"></i> -->
                            <h4>Address</h4>
                            <div>Ilashe Luxury Beach, Epe, Lagos.</div>
                        </li>
                        <li>
                            <!-- <i class="bi bi-envelope-paper"></i> -->
                            <h4>Email address</h4>
                            <p><a href="mailto:bookings@bellezabeachresort.com">bookings@bellezabeachresort.com</a></p>
                        </li>
                        <li>
                            <!-- <i class="bi bi-telephone"></i> -->
                            <h4>Telephone</h4>
                            <div><a href="tel:+234 9169999011">+234 9169999011</a></div>
                        </li>
                        <li>
                            <!-- <i class="bi bi-telephone"></i> -->
                            <h4>Follow Us</h4>
                            <div class="social">
                                <ul>
                                    <li><a href="https://instagram.com/bellezabeachresortng?igshid=MzRlODBiNWFlZA=="><i class="bi bi-instagram"></i></a></li>
                                    <li><a href="https://www.snapchat.com/add/bellezabeachng"><i class="bi bi-snapchat"></i></a></li>
                                    <li><a href="https://www.tiktok.com/@bellezabeachresort?_t=8fPIIZhB8A1&_r=1"><i class="bi bi-tiktok"></i></a></li>
                                    <li><a href="https://twitter.com/BellezaBeach?t=6HdcLjdDhTgpxYXAd7qm6g&s=09"><i class="bi bi-twitter-x"></i></a></li>
                                </ul>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="col-xl-7 col-lg-7 order-lg-1">
                <h3 class="mb-3">Get in Touch</h3>
                <div id="message-contact"></div>
                <form method="post"  id="contactform" autocomplete="off">

                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-floating mb-4">
                                <input class="form-control" type="text" id="name_contact" name="name_contact" placeholder="Name" required>
                                <label for="name_contact">Name</label>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-floating mb-4">
                                <input class="form-control" type="text" id="lastname_contact" name="lastname_contact" placeholder="Last Name" required>
                                <label for="lastname_contact">Last name</label>
                            </div>
                        </div>
                    </div>
                    <!-- /row -->
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-floating mb-4">
                                <input class="form-control" type="email" id="email_contact" name="email_contact" placeholder="Email" required>
                                <label for="email_contact">Email</label>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-floating mb-4">
                                <input class="form-control" type="text" id="phone_contact" name="phone_contact" placeholder="Telephone" required>
                                <label for="phone_contact">Telephone</label>
                            </div>
                        </div>
                    </div>
                    <!-- /row -->
                    <div class="form-floating mb-4">
                        <textarea class="form-control" placeholder="Message" id="message_contact" name="message_contact" required></textarea>
                        <label for="message_contact">Message</label>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-floating mb-4">
                                <input class="form-control" type="text" id="verify_contact" name="verify_contact" placeholder="Are you human? 3 + 1 =" required>
                                <label for="verify_contact">Are you human? 3 + 1 =</label>
                            </div>
                        </div>
                    </div>
                    <div class="err_msg"></div>
                    <button style="display: none;" type="button" id="email_sent_success_btn"  data-bs-toggle="modal" data-bs-target="#email_sent_success"></button>
                    <p class="mt-3"><input type="submit" value="Submit" class="btn_1 outline" id="submit-contact"></p>
                </form>
            </div>
        </div>
        <!-- /row -->
    </div>
    <!--/container -->

    <div class="map_contact">
        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3964.913193104905!2d3.202329673991928!3d6.405184193585537!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x103b876055fb57cd%3A0x12e78eb5eb68118a!2sBelleza%20Beach%20Resort!5e0!3m2!1sen!2sng!4v1706857629263!5m2!1sen!2sng" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
    </div>


</main>

{% endblock content %}

{% block modals %}

<div class="modal fade" id="email_sent_success" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="staticBackdropLabel"> Your enquiry has been sent! </h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p> Your enquiry has been sent to our customer support and we will get back to you shortly.  </p>

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

{% endblock modals %}



{% block extra_scripts %}

<script type="text/javascript">


$(document).ready(function(){


    var form = document.getElementById('contactform')
    form.addEventListener('submit', function(e){
        e.preventDefault()
        console.log('Submitting form...')
        submitFormData()
    })


 function submitFormData(){


    formData = {
          'name_contact': form.name_contact.value,
          'lastname_contact': form.lastname_contact.value,
          'email_contact': form.email_contact.value,
          'phone_contact': form.phone_contact.value,
          "message_contact": form.message_contact.value,
          "verify_contact":form.verify_contact.value,
    }


    var url = "/process_contact_form/"


    fetch(url, {
                method: 'POST',
                headers:{
                    'Content-Type':'applicaiton/json',
	    			'X-CSRFToken':csrftoken,
                },

                body:JSON.stringify(formData),
            })
            .then((response) => response.json())
            .then((data) => {
                if  (data['status'] == "success"){
                    // trigger success modal
                    $("#email_sent_success_btn").click();
                } else {
                    let err_div = $("#err_msg")
                    err_div.innerHTML = `<p style="color: red;"> There was a problem sending your enquiry !</p>`
                }
            })



 }



})


</script>

{% endblock extra_scripts %}